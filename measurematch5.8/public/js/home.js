$(document).ready(function () { $('#cookiesPopup').on('click', function (e) { $.cookie("cookieIds", "true", {expires: 90 * 24 * 60 * 60}); $('.topbluebar').remove(); }); $('#newsletters').on('keypress' ,function (e) { if (e.which == 13) { var error_count = 0; var newsletter_email = $('#newsletters').val(); var email_regx = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/; if (newsletter_email === '') { $("#email_error").html('Please enter email.').fadeIn('fast').delay(5000).fadeOut('fast').show(); return false; error_count++; } else if (!email_regx.test(newsletter_email)) { $("#email_error").html('Email address not recognised.').fadeIn('fast').delay(5000).fadeOut('fast').show(); return false; error_count++; } else if ((email_regx.test(newsletter_email)) && (newsletter_email !== '')) { $.ajaxSetup({ headers: { 'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content') } }); $.ajax({ type: 'post', url: base_url + '/newsletterSubscribe', data: {email: newsletter_email}, success: function (response) { var json_decode = jQuery.parseJSON(response); if (response == 'true') { $('#newsletters').val(""); $("#email_error").html("Thanks for subscribing to the MeasureMatch newsletter.").fadeIn('fast').delay(2000).fadeOut('fast').show(); } else if (json_decode) { var errorCode = json_decode.code; if (errorCode == '-99') { $("#email_error").html(newsletter_email + " has too many recent signup requests.").fadeIn('fast').delay(2000).fadeOut('fast').show(); } else if (errorCode == '214') { $("#email_error").html("We think you're awesome, too, but you're already subscribed. A newsletter is likely soon on its way.").fadeIn('fast').delay(2000).fadeOut('fast').show(); } else { $("#email_error").html(""); error_count++; } } }, complete: function () { }, error: function (jqXHR, exception) { displayErrorMessage(jqXHR, exception); } }); } else { $("#email_error").html(''); } e.preventDefault(); } }); $('#subscribe_newsletter').on('click', function (e) { var error_count = 0; var newsletter_email = $('#newsletters').val(); var email_regx = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/; if (newsletter_email === '') { $("#email_error").html('Please enter email.').fadeIn('fast').delay(5000).fadeOut('fast').show(); error_count++; } else if (!email_regx.test(newsletter_email)) { $("#email_error").html('Email address not recognised.').fadeIn('fast').delay(5000).fadeOut('fast').show(); error_count++; } else if ((email_regx.test(newsletter_email)) && (newsletter_email !== '')) { $.ajaxSetup({ headers: { 'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content') } }); $.ajax({ type: 'post', url: base_url + '/newsletterSubscribe', data: {email: newsletter_email}, async: false, success: function (response) { var json_decode = jQuery.parseJSON(response); if (response == 'true') { $('#newsletters').val(""); $("#email_error").html("Thanks for subscribing to the MeasureMatch newsletter.").fadeIn('fast').delay(2000).fadeOut('fast').show(); } else if (json_decode) { var errorCode = json_decode.code; if (errorCode == '-99') { $("#email_error").html(newsletter_email + " has too many recent signup requests.").fadeIn('fast').delay(2000).fadeOut('fast').show(); } else if (errorCode == '214') { $("#email_error").html("We think you're awesome, too, but you're already subscribed. A newsletter is likely soon on its way.").fadeIn('fast').delay(2000).fadeOut('fast').show(); } else { $("#email_error").html(""); error_count++; } } }, error: function (jqXHR, exception) { displayErrorMessage(jqXHR, exception); }, }); } else { $("#email_error").html(''); } }); var buyer_address = $('#buyerAddress').val(); $("#home_arrow").on('click' ,function () { $('html, body').animate({ scrollTop: $("#whyshould").offset().top - 100 }, 1000); }); if (window.location.href.indexOf("pplink") > -1) { $('#privacypolicy_link').click(); } if (window.location.href.indexOf("tnc") > -1) { $('#tnc_link').click(); } });